(function($){$.fn.extend({expander:function(options){var defaults={start:3,step:5,limit:-1,moreText:"Show more",lessText:"Show less",moreClass:"",lessClass:"",hideClass:"hide",append:true,beforeExpand:false,afterExpand:false,beforeCollapse:false,afterCollapse:false};var options=$.extend(defaults,options);var methods={hide:function(element){element.addClass(options.hideClass).hide()},show:function(element){element.removeClass(options.hideClass).show()}};return this.each(function(){var obj=$(this);obj.addClass("expander");var controls="";var childrens=obj.children();var quantity=childrens.length-options.start;var visible=options.start;methods.hide(childrens.slice(options.start));if(quantity>0){controls='<div class="controls"><a href="#more" class="more '+options.moreClass+'">'+options.moreText+'</a><a href="#less" class="less '+options.lessClass+" "+options.hideClass+'">'+options.lessText+"</a></div>"}if(options.append){obj.append(controls)}else{obj.prepend(controls)}var moreControl=$(".more",obj);var lessControl=$(".less",obj);moreControl.click(function(){if(options.beforeExpand){eval(options.beforeExpand(obj))}if(options.step>0){methods.show(childrens.slice(visible,visible+options.step));visible+=options.step}else{if(options.limit>0){methods.show(childrens.slice(visible,options.limit));visible=options.limit}else{methods.show(childrens.slice(visible,childrens.length));visible=childrens.length}}if(options.limit!=-1&&visible>=options.limit){methods.hide(moreControl);methods.show(lessControl)}else{if(options.start<visible&&visible<childrens.length){methods.show(lessControl)}else{if(visible>=childrens.length){methods.hide(moreControl);methods.show(lessControl)}}}if(options.afterExpand){eval(options.afterExpand(obj))}return false});lessControl.click(function(){if(options.beforeCollapse){eval(options.beforeCollapse(obj))}if(options.step>0){visible-=options.step;methods.hide(childrens.slice(visible))}else{methods.hide(childrens.slice(options.start));visible=options.start}if(options.start<visible&&visible<childrens.length){methods.show(moreControl)}else{if(visible==options.start){methods.hide(lessControl);methods.show(moreControl)}}if(options.afterCollapse){eval(options.afterCollapse(obj))}return false})})}})})(jQuery);